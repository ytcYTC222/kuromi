# å•†å“ç®¡ç†åŠŸèƒ½å¼€å‘æµç¨‹è§„èŒƒ

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£æ€»ç»“äº†å•†åŸåå°ç®¡ç†ç³»ç»Ÿä¸­å•†å“ç®¡ç†åŠŸèƒ½çš„å®Œæ•´å¼€å‘æµç¨‹ï¼ŒåŒ…æ‹¬å­—æ®µæ˜ å°„ä¿®å¤ã€APIæ¥å£å®ç°ã€åˆ†ç±»ç®¡ç†ç³»ç»Ÿæ„å»ºç­‰å…³é”®æ­¥éª¤ã€‚

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **å‰ç«¯**: Vue3 + TypeScript + Element Plus + Vite
- **åç«¯**: Spring Boot 3.1.5 + MyBatis Plus + MySQL 8.0
- **å¼€å‘ç¯å¢ƒ**: Windows + PowerShell + Node.js 20.13.1 + Java 17

## ğŸ“Š å¼€å‘æµç¨‹æ€»è§ˆ

```mermaid
graph TB
    A[éœ€æ±‚åˆ†æ] --> B[æ•°æ®åº“è®¾è®¡éªŒè¯]
    B --> C[åç«¯APIå¼€å‘]
    C --> D[å‰ç«¯æ¥å£å¯¹æ¥]
    D --> E[å­—æ®µæ˜ å°„ä¿®å¤]
    E --> F[åŠŸèƒ½æµ‹è¯•éªŒè¯]
    F --> G[åŠ¨æ€æ•°æ®é›†æˆ]
    G --> H[ç³»ç»Ÿé›†æˆæµ‹è¯•]
```

## ğŸ”§ è¯¦ç»†å¼€å‘æ­¥éª¤

### ç¬¬ä¸€é˜¶æ®µï¼šé—®é¢˜è¯Šæ–­ä¸ä¿®å¤

#### 1.1 å­—æ®µæ˜ å°„ä¸ä¸€è‡´é—®é¢˜è§£å†³

**é—®é¢˜æè¿°**ï¼š
- å‰åç«¯å­—æ®µåä¸åŒ¹é…ï¼š`stockQuantity/salesCount` vs `stock/sales`
- ç°ä»·å­—æ®µä¸åŒ¹é…ï¼šæ•°æ®åº“ `current_price` vs åç«¯DTO `price`

**è§£å†³æ–¹æ¡ˆ**ï¼š
```java
// ProductResponse.java ä¿®å¤å­—æ®µæ˜ å°„
public class ProductResponse {
    private Integer stockQuantity;  // ç»Ÿä¸€ä½¿ç”¨ stockQuantity
    private Integer salesCount;     // ç»Ÿä¸€ä½¿ç”¨ salesCount  
    private BigDecimal currentPrice; // ç»Ÿä¸€ä½¿ç”¨ currentPrice
    
    // ... getter/setteræ–¹æ³•
}
```

**å…³é”®ä¿®å¤æ–‡ä»¶**ï¼š
- `d:\å•†åŸåå°\mall-admin-backend\src\main\java\com\mall\admin\dto\response\ProductResponse.java`
- `d:\å•†åŸåå°\mall-admin-backend\src\main\java\com\mall\admin\service\impl\ProductServiceImpl.java`

#### 1.2 å•†å“çŠ¶æ€ç®¡ç†APIå®ç°

**éœ€æ±‚**ï¼šå®ç°å•†å“ä¸Šä¸‹æ¶åŠŸèƒ½

**å®ç°æ­¥éª¤**ï¼š
1. **åç«¯APIå¼€å‘**ï¼š
```java
// ProductController.java
@PatchMapping("/{id}/status")
public ApiResponse<Void> updateProductStatus(
    @PathVariable Integer id,
    @RequestBody Map<String, Integer> request) {
    Integer status = request.get("status");
    productService.updateProductStatus(id, status);
    return ApiResponse.success();
}
```

2. **æœåŠ¡å±‚å®ç°**ï¼š
```java
// ProductServiceImpl.java
public void updateProductStatus(Integer id, Integer status) {
    // å‚æ•°éªŒè¯
    if (id == null || id <= 0) {
        throw new IllegalArgumentException("å•†å“IDä¸èƒ½ä¸ºç©º");
    }
    if (status == null || (status != 0 && status != 1)) {
        throw new IllegalArgumentException("çŠ¶æ€å€¼æ— æ•ˆ");
    }
    
    // æ›´æ–°çŠ¶æ€
    Product product = new Product();
    product.setProductId(id);
    product.setStatus(status);
    productMapper.updateById(product);
}
```

### ç¬¬äºŒé˜¶æ®µï¼šåˆ†ç±»ç®¡ç†ç³»ç»Ÿå¼€å‘

#### 2.1 åˆ†ç±»æœåŠ¡å±‚å®ç°

**åˆ›å»ºæ–‡ä»¶**ï¼š`CategoryServiceImpl.java`

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- åˆ†é¡µæŸ¥è¯¢åˆ†ç±»åˆ—è¡¨
- åˆ†ç±»CRUDæ“ä½œ
- åˆ†ç±»æ ‘ç»“æ„æ„å»º
- æ‰¹é‡çŠ¶æ€æ›´æ–°

```java
// CategoryServiceImpl.java å…³é”®ä»£ç ç‰‡æ®µ
@Override
public PageResult<CategoryResponse> getCategoryList(Integer page, Integer size, String keyword, Integer parentId) {
    Page<Category> pageObj = new Page<>(page, size);
    LambdaQueryWrapper<Category> queryWrapper = new LambdaQueryWrapper<>();
    
    // æ·»åŠ æŸ¥è¯¢æ¡ä»¶
    if (StringUtils.hasText(keyword)) {
        queryWrapper.like(Category::getCategoryName, keyword);
    }
    if (parentId != null) {
        queryWrapper.eq(Category::getParentId, parentId);
    }
    
    Page<Category> resultPage = categoryMapper.selectPage(pageObj, queryWrapper);
    // è½¬æ¢ä¸ºå“åº”DTO
    return convertToPageResult(resultPage);
}
```

#### 2.2 åˆ†ç±»æ§åˆ¶å™¨å®ç°

**åˆ›å»ºæ–‡ä»¶**ï¼š`CategoryController.java`

**RESTful APIè®¾è®¡**ï¼š
```java
@RestController
@RequestMapping("/api/categories")
public class CategoryController {
    
    @GetMapping
    public ApiResponse<PageResult<CategoryResponse>> getCategoryList(
        @RequestParam(defaultValue = "1") Integer page,
        @RequestParam(defaultValue = "10") Integer size,
        @RequestParam(required = false) String keyword,
        @RequestParam(required = false) Integer parentId) {
        // å®ç°åˆ†é¡µæŸ¥è¯¢
    }
    
    @GetMapping("/tree")
    public ApiResponse<List<CategoryResponse>> getCategoryTree() {
        // è¿”å›åˆ†ç±»æ ‘ç»“æ„
    }
}
```

### ç¬¬ä¸‰é˜¶æ®µï¼šæ–°å¢å•†å“åŠŸèƒ½ä¿®å¤

#### 3.1 ç¼ºå¤±å­—æ®µé—®é¢˜è¯Šæ–­

**é”™è¯¯ä¿¡æ¯**ï¼š
```
Field 'original_price' doesn't have a default value
```

**æ ¹å› åˆ†æ**ï¼š
- `ProductRequest.java` ç¼ºå°‘å¿…éœ€å­—æ®µ
- æ•°æ®åº“è¡¨å®šä¹‰äº†éç©ºå­—æ®µä½†DTOæœªåŒ…å«

#### 3.2 ä¿®å¤æ–¹æ¡ˆå®æ–½

**ä¿®å¤æ–‡ä»¶**ï¼š`ProductRequest.java`

```java
public class ProductRequest {
    // æ·»åŠ ç¼ºå¤±å­—æ®µ
    @DecimalMin(value = "0.01", message = "åŸä»·å¿…é¡»å¤§äº0")
    private BigDecimal originalPrice;
    
    @DecimalMin(value = "0.01", message = "æˆæœ¬ä»·å¿…é¡»å¤§äº0") 
    private BigDecimal costPrice;
    
    @DecimalMin(value = "0.01", message = "ä¿ƒé”€ä»·å¿…é¡»å¤§äº0")
    private BigDecimal promotionPrice;
    
    // getter/setteræ–¹æ³•
    public BigDecimal getOriginalPrice() { return originalPrice; }
    public void setOriginalPrice(BigDecimal originalPrice) { this.originalPrice = originalPrice; }
    // ... å…¶ä»–æ–¹æ³•
}
```

### ç¬¬å››é˜¶æ®µï¼šå‰ç«¯åŠ¨æ€æ•°æ®é›†æˆ

#### 4.1 åˆ†ç±»æ•°æ®åŠ¨æ€åŠ è½½

**ç›®æ ‡**ï¼šå°†é™æ€åˆ†ç±»é€‰é¡¹æ›¿æ¢ä¸ºAPIåŠ¨æ€è·å–

**ä¿®æ”¹æ–‡ä»¶**ï¼š`List.vue`

**å…³é”®å®ç°**ï¼š
```typescript
// å¯¼å…¥åˆ†ç±»API
import { categoryAPI, type CategoryResponse } from '@/api/category'

// æ·»åŠ çŠ¶æ€ç®¡ç†
const categoriesLoading = ref(false)
const categoryList = ref<CategoryResponse[]>([])

// åŠ¨æ€åŠ è½½åˆ†ç±»æ•°æ®
const loadCategoryList = async () => {
  categoriesLoading.value = true
  try {
    const response = await categoryAPI.getCategoryList({
      page: 1,
      size: 1000,
      status: 1 // åªè·å–å¯ç”¨çš„åˆ†ç±»
    })
    categoryList.value = response.records || []
  } catch (error: any) {
    ElMessage.error(`åŠ è½½åˆ†ç±»åˆ—è¡¨å¤±è´¥ï¼š${error.message || 'æœªçŸ¥é”™è¯¯'}`)
  } finally {
    categoriesLoading.value = false
  }
}
```

**æ¨¡æ¿æ›´æ–°**ï¼š
```vue
<el-select
  v-model="searchForm.categoryId"
  placeholder="è¯·é€‰æ‹©åˆ†ç±»"
  clearable
  :loading="categoriesLoading"
>
  <el-option
    v-for="category in categoryList"
    :key="category.categoryId"
    :label="category.categoryName"
    :value="category.categoryId"
  />
</el-select>
```

## ğŸ§ª æµ‹è¯•éªŒè¯æµç¨‹

### 4.1 APIæ¥å£æµ‹è¯•

**æµ‹è¯•å‘½ä»¤**ï¼š
```powershell
# æµ‹è¯•æ–°å¢å•†å“API
Invoke-RestMethod -Uri "http://localhost:8080/api/products" -Method POST -ContentType "application/json" -Body '{"productName":"æµ‹è¯•å•†å“","productCode":"TEST001","categoryId":1,"currentPrice":99.99,"originalPrice":199.99,"stockQuantity":100,"status":1}'

# æµ‹è¯•åˆ†ç±»åˆ—è¡¨API
Invoke-RestMethod -Uri "http://localhost:8080/api/categories?page=1&size=1000" -Method GET
```

**é¢„æœŸç»“æœ**ï¼š
- çŠ¶æ€ç ï¼š200
- å“åº”ï¼š`{"code":200,"message":"æ“ä½œæˆåŠŸ","success":true}`

### 4.2 å‰ç«¯åŠŸèƒ½æµ‹è¯•

**æµ‹è¯•é¡¹ç›®**ï¼š
1. âœ… å•†å“åˆ—è¡¨åŠ è½½
2. âœ… åˆ†ç±»ä¸‹æ‹‰æ¡†åŠ¨æ€æ•°æ®
3. âœ… å•†å“çŠ¶æ€åˆ‡æ¢ï¼ˆä¸Šæ¶/ä¸‹æ¶ï¼‰
4. âœ… æ–°å¢å•†å“åŠŸèƒ½
5. âœ… å•†å“ç¼–è¾‘åŠŸèƒ½

## ğŸ” å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

### é—®é¢˜1ï¼šå­—æ®µæ˜ å°„ä¸ä¸€è‡´

**ç—‡çŠ¶**ï¼šå‰ç«¯æ˜¾ç¤ºå¼‚å¸¸ï¼Œæ•°æ®ä¸ºç©ºæˆ–undefined

**è§£å†³æ­¥éª¤**ï¼š
1. æ£€æŸ¥æ•°æ®åº“å­—æ®µå
2. ç¡®è®¤DTOå­—æ®µå‘½å
3. éªŒè¯å‰ç«¯æ¥å£ç±»å‹å®šä¹‰
4. ç»Ÿä¸€æ‰€æœ‰å±‚çº§çš„å­—æ®µå

### é—®é¢˜2ï¼šAPI 404é”™è¯¯

**ç—‡çŠ¶**ï¼šå‰ç«¯è°ƒç”¨åç«¯æ¥å£è¿”å›404

**è§£å†³æ­¥éª¤**ï¼š
1. æ£€æŸ¥Controllerè·¯ç”±æ˜ å°„
2. ç¡®è®¤RequestMappingè·¯å¾„
3. éªŒè¯HTTPæ–¹æ³•ï¼ˆGET/POST/PUT/DELETEï¼‰
4. æ£€æŸ¥å‚æ•°ç»‘å®š

### é—®é¢˜3ï¼šæ•°æ®åº“å­—æ®µç¼ºå¤±é»˜è®¤å€¼

**ç—‡çŠ¶**ï¼šæ’å…¥æ•°æ®æ—¶æŠ¥"Field doesn't have a default value"

**è§£å†³æ­¥éª¤**ï¼š
1. æ£€æŸ¥æ•°æ®åº“è¡¨ç»“æ„
2. ç¡®è®¤DTOåŒ…å«æ‰€æœ‰å¿…éœ€å­—æ®µ
3. æ·»åŠ å­—æ®µéªŒè¯æ³¨è§£
4. å®ç°getter/setteræ–¹æ³•

## ğŸš€ éƒ¨ç½²è¿è¡ŒæŒ‡å—

### å¯åŠ¨åç«¯æœåŠ¡

```powershell
# è¿›å…¥åç«¯é¡¹ç›®ç›®å½•
Push-Location "d:\å•†åŸåå°\mall-admin-backend"

# ç¼–è¯‘å¹¶å¯åŠ¨
mvn clean compile
mvn spring-boot:run
```

### å¯åŠ¨å‰ç«¯æœåŠ¡

```powershell
# è¿›å…¥å‰ç«¯é¡¹ç›®ç›®å½•
Push-Location "d:\å•†åŸåå°\vue3-admin"

# å®‰è£…ä¾èµ–å¹¶å¯åŠ¨
npm install
npm run dev
```

**è®¿é—®åœ°å€**ï¼š
- å‰ç«¯ï¼šhttp://localhost:3002
- åç«¯APIï¼šhttp://localhost:8080
- æ¥å£æ–‡æ¡£ï¼šhttp://localhost:8080/api/swagger-ui.html

## ğŸ“‹ å¼€å‘è§„èŒƒæ€»ç»“

### ä»£ç è§„èŒƒ

1. **å­—æ®µå‘½åä¸€è‡´æ€§**ï¼šç¡®ä¿æ•°æ®åº“ã€åç«¯DTOã€å‰ç«¯æ¥å£çš„å­—æ®µåä¿æŒä¸€è‡´
2. **APIè®¾è®¡è§„èŒƒ**ï¼šéµå¾ªRESTfulè®¾è®¡åŸåˆ™
3. **é”™è¯¯å¤„ç†**ï¼šç»Ÿä¸€å¼‚å¸¸å¤„ç†å’Œé”™è¯¯æç¤º
4. **æ•°æ®éªŒè¯**ï¼šæ·»åŠ å¿…è¦çš„å‚æ•°éªŒè¯å’Œä¸šåŠ¡æ ¡éªŒ

### å¼€å‘æµç¨‹

1. **éœ€æ±‚åˆ†æ** â†’ **æ•°æ®åº“è®¾è®¡** â†’ **åç«¯API** â†’ **å‰ç«¯å¯¹æ¥** â†’ **æµ‹è¯•éªŒè¯**
2. **å¢é‡å¼€å‘**ï¼šå…ˆå®ç°æ ¸å¿ƒåŠŸèƒ½ï¼Œå†å®Œå–„ç»†èŠ‚ç‰¹æ€§
3. **åŠæ—¶æµ‹è¯•**ï¼šæ¯ä¸ªåŠŸèƒ½ç‚¹å®Œæˆåç«‹å³è¿›è¡ŒAPIæµ‹è¯•
4. **æ–‡æ¡£åŒæ­¥**ï¼šåŠæ—¶æ›´æ–°æ¥å£æ–‡æ¡£å’Œå¼€å‘æ–‡æ¡£

### è´¨é‡ä¿è¯

1. **å•å…ƒæµ‹è¯•**ï¼šå…³é”®ä¸šåŠ¡é€»è¾‘éœ€è¦ç¼–å†™å•å…ƒæµ‹è¯•
2. **é›†æˆæµ‹è¯•**ï¼šå®Œæ•´çš„APIè°ƒç”¨é“¾è·¯æµ‹è¯•
3. **ç”¨æˆ·ä½“éªŒ**ï¼šç•Œé¢å“åº”é€Ÿåº¦ã€é”™è¯¯æç¤ºã€åŠ è½½çŠ¶æ€
4. **ä»£ç å®¡æŸ¥**ï¼šå…³æ³¨ä»£ç è´¨é‡ã€æ€§èƒ½ä¼˜åŒ–ã€å®‰å…¨æ€§

## ğŸ¯ é¡¹ç›®æˆæœ

ç»è¿‡å®Œæ•´çš„å¼€å‘æµç¨‹ï¼ŒæˆåŠŸå®ç°äº†ä»¥ä¸‹åŠŸèƒ½ï¼š

- âœ… **å•†å“åˆ—è¡¨ç®¡ç†**ï¼šåˆ†é¡µæŸ¥è¯¢ã€æ¡ä»¶ç­›é€‰ã€çŠ¶æ€ç®¡ç†
- âœ… **å•†å“CRUDæ“ä½œ**ï¼šæ–°å¢ã€ç¼–è¾‘ã€åˆ é™¤ã€çŠ¶æ€åˆ‡æ¢
- âœ… **åˆ†ç±»ç®¡ç†ç³»ç»Ÿ**ï¼šåŠ¨æ€åˆ†ç±»åŠ è½½ã€åˆ†ç±»æ ‘ç»“æ„
- âœ… **æ•°æ®ä¸€è‡´æ€§**ï¼šå‰åç«¯å­—æ®µæ˜ å°„ç»Ÿä¸€
- âœ… **ç”¨æˆ·ä½“éªŒä¼˜åŒ–**ï¼šåŠ è½½çŠ¶æ€ã€é”™è¯¯æç¤ºã€ç•Œé¢å“åº”

## ğŸ“š å‚è€ƒæ–‡æ¡£

- [Spring Bootå®˜æ–¹æ–‡æ¡£](https://spring.io/projects/spring-boot)
- [Vue3å®˜æ–¹æ–‡æ¡£](https://vuejs.org/)
- [Element Plusç»„ä»¶åº“](https://element-plus.org/)
- [MyBatis Plusæ–‡æ¡£](https://baomidou.com/)

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0  
**åˆ›å»ºæ—¶é—´**ï¼š2025-09-10  
**æœ€åæ›´æ–°**ï¼š2025-09-10  
**ç»´æŠ¤äººå‘˜**ï¼šå•†åŸåå°å¼€å‘å›¢é˜Ÿ